-- Table: EMPLOYEE_ATTENDANCE
-- Purpose: Store daily attendance details for each employee.

CREATE TABLE EMPLOYEE_ATTENDANCE (
    ATTENDANCE_ID      NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID        NUMBER NOT NULL,
    ATTENDANCE_DATE    DATE   NOT NULL,
    CLOCK_IN_TIME      TIMESTAMP,
    CLOCK_OUT_TIME     TIMESTAMP,
    STATUS             VARCHAR2(20) CHECK (STATUS IN ('PRESENT', 'ABSENT', 'ON LEAVE')),
    REMARKS            VARCHAR2(255),
    CREATED_AT         TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT         TIMESTAMP
);

-- Index to quickly search by employee and date
CREATE UNIQUE INDEX UX_ATTENDANCE_EMP_DATE
ON EMPLOYEE_ATTENDANCE (EMPLOYEE_ID, ATTENDANCE_DATE);

-- Sample FK to employee master table (assuming EMPLOYEE_MASTER exists)
ALTER TABLE EMPLOYEE_ATTENDANCE
ADD CONSTRAINT FK_ATTENDANCE_EMPLOYEE
FOREIGN KEY (EMPLOYEE_ID)
REFERENCES EMPLOYEE_MASTER (EMPLOYEE_ID);
